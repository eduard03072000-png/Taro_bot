"""
Скрипт для добавления перевёрнутых значений к картам Таро
"""
import json
from pathlib import Path

def add_reversed_meanings():
    data_path = Path(__file__).parent.parent / 'data' / 'tarot_cards.json'
    
    # Читаем текущие данные
    with open(data_path, 'r', encoding='utf-8') as f:
        data = json.load(f)
    
    # Перевёрнутые значения для Старших Арканов
    reversed_meanings = {
        "Шут": "Безответственность, неоправданный риск, хаос. Избегайте импульсивных решений.",
        "Маг": "Манипуляции, обман, злоупотребление властью. Нечестность в делах.",
        "Верховная Жрица": "Игнорирование интуиции, секреты раскрываются. Недостаток внутренней мудрости.",
        "Императрица": "Излишняя зависимость, удушающая забота. Пренебрежение собой ради других.",
        "Император": "Тирания, жёсткость, отсутствие гибкости. Злоупотребление властью.",
        "Иерофант": "Догматизм, слепое следование традициям. Отказ от собственного пути.",
        "Влюблённые": "Неправильный выбор, дисгармония в отношениях. Конфликт ценностей.",
        "Колесница": "Потеря контроля, агрессия, поражение. Движение в неверном направлении.",
        "Сила": "Слабость, страх, неконтролируемые эмоции. Потеря внутренней силы.",
        "Отшельник": "Изоляция, одиночество, избегание. Нежелание обращаться за помощью.",
        "Колесо Фортуны": "Неудача, застой, сопротивление переменам. Плохая полоса.",
        "Справедливость": "Несправедливость, нечестность, избегание ответственности. Обман.",
        "Повешенный": "Бессмысленная жертва, застой, неспособность измениться. Упущенные возможности.",
        "Смерть": "Сопротивление переменам, застревание в прошлом. Страх перед новым.",
        "Умеренность": "Дисбаланс, крайности, отсутствие гармонии. Нетерпеливость.",
        "Дьявол": "Осознание зависимостей, начало освобождения. Путь к свободе (позитивное!).",
        "Башня": "Избегание неизбежного, внутренний кризис. Страх перед разрушением.",
        "Звезда": "Потеря надежды, пессимизм, отчаяние. Отсутствие веры в будущее.",
        "Луна": "Усиление страхов, иллюзии, обман. Паранойя и тревога.",
        "Солнце": "Временное омрачение, задержка счастья. Но свет вернётся!",
        "Суд": "Неспособность простить, жёсткое осуждение. Упущенный второй шанс.",
        "Мир": "Незавершённость, отсутствие достижений. Нужно завершить цикл."
    }
    
    # Добавляем перевёрнутые значения
    for card in data['major_arcana']:
        card_name = card['name']
        if card_name in reversed_meanings and 'reversed_meaning' not in card:
            card['reversed_meaning'] = reversed_meanings[card_name]
    
    # Сохраняем
    with open(data_path, 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)
    
    print("Perevernytye znacheniya dobavleny!")
    print(f"Obnovleno kart: {len([c for c in data['major_arcana'] if 'reversed_meaning' in c])}")

if __name__ == '__main__':
    add_reversed_meanings()
